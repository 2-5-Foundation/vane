import { HexString } from '@polkadot/util/types';
import _ from 'lodash';
import { Block } from '../blockchain/block.js';
import type { JsCallback } from '@acala-network/chopsticks-executor';
export { JsCallback };
export type RuntimeVersion = {
    specName: string;
    implName: string;
    authoringVersion: number;
    specVersion: number;
    implVersion: number;
    apis: [HexString, number][];
    transactionVersion: number;
    stateVersion: number;
};
export type RuntimeLog = {
    message: string;
    level?: number;
    target?: string;
};
export type TaskCallResponse = {
    result: HexString;
    storageDiff: [HexString, HexString | null][];
    offchainStorageDiff: [HexString, HexString | null][];
    runtimeLogs: RuntimeLog[];
};
export type TaskResponse = {
    Call: TaskCallResponse;
} | {
    Error: string;
};
export interface WasmExecutor {
    getRuntimeVersion: (code: HexString) => Promise<RuntimeVersion>;
    calculateStateRoot: (entries: [HexString, HexString][], trie_version: number) => Promise<HexString>;
    createProof: (nodes: HexString[], entries: [HexString, HexString | null][]) => Promise<[HexString, HexString[]]>;
    decodeProof: (trieRootHash: HexString, keys: HexString[], nodes: HexString[]) => Promise<[[HexString, HexString | null]]>;
    runTask: (task: {
        wasm: HexString;
        calls: [string, HexString[]][];
        mockSignatureHost: boolean;
        allowUnresolvedImports: boolean;
        runtimeLogLevel: number;
    }, callback?: JsCallback) => Promise<TaskResponse>;
}
export declare const getRuntimeVersion: ((code: HexString) => Promise<RuntimeVersion>) & _.MemoizedFunction;
export declare const calculateStateRoot: (entries: [HexString, HexString][], trie_version: number) => Promise<HexString>;
export declare const decodeProof: (trieRootHash: HexString, keys: HexString[], nodes: HexString[]) => Promise<{}>;
export declare const createProof: (nodes: HexString[], entries: [HexString, HexString | null][]) => Promise<{
    trieRootHash: `0x${string}`;
    nodes: `0x${string}`[];
}>;
export declare const runTask: (task: {
    wasm: HexString;
    calls: [string, HexString[]][];
    mockSignatureHost: boolean;
    allowUnresolvedImports: boolean;
    runtimeLogLevel: number;
}, callback?: JsCallback) => Promise<{
    Call: TaskCallResponse;
} | {
    Error: string;
}>;
export declare const taskHandler: (block: Block) => JsCallback;
export declare const emptyTaskHandler: {
    getStorage: (_key: HexString) => Promise<never>;
    getStateRoot: () => Promise<never>;
    getNextKey: (_prefix: HexString, _key: HexString) => Promise<never>;
    offchainGetStorage: (_key: HexString) => Promise<never>;
    offchainTimestamp: () => Promise<never>;
    offchainRandomSeed: () => Promise<never>;
    offchainSubmitTransaction: (_tx: HexString) => Promise<never>;
};
export declare const getAuraSlotDuration: ((wasm: HexString) => Promise<number>) & _.MemoizedFunction;
export declare const destroyWorker: () => Promise<void>;
